pages=[]

Dir.glob( "qsrc/*" ) do |fn|
  next unless File.directory?(fn)
  name = File.split(fn).last
  dest = "pages/#{name}.html"

  desc "create #{dest}"
  task name.to_sym=>dest

  pages << name.to_sym
  
  desc "create #{dest}"
  file dest do
    sh "haml render -r ./#{fn}/page.rb ./#{fn}/page.haml > #{dest}"
  end
end

desc "default task"
task :default => pages do
end
