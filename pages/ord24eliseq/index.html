<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <title>多段階選抜 2014.8.2 問題</title>
    <style>
      body, textarea {
          font-family: "Noto Sans Japanese", 'ヒラギノ角ゴ Pro W3','Hiragino Kaku Gothic Pro','メイリオ',Meiryo,'ＭＳ Ｐゴシック',sans-serif;
          font-size:11pt;
      }
      textarea {
        font-size:7pt;
        width:80%;
        height:7em;
      }
      img.large{ width:322px }
      img.small{ width:82px }
      
      td.center{ text-align:center; }
      
      tr:nth-child(even) { background-color: #fafafa }
      tr:nth-child(odd) { background-color: #f0f0f0 }
      code {
        border:solid #ccc 1px;
        font-family:monospace;
      }
      table code {
        border:none
      }
      h1{
        border-top : solid 2px #bbb;
        border-left : solid 16px #bbb;
        background-color: #f8f8f8;
      }
      h2{
        border-top : solid 2px #bbb;
        border-left : solid 8px #bbb;
        background-color: #f8f8f8;
      }
      h3{
        border-top : solid 1px #bbb;
        border-left : solid 4px #bbb;
        background-color: #f8f8f8;
      }
      h4{
        border-top : solid 1px #bbb;
        border-left : solid 2px #bbb;
        background-color: #f8f8f8;
      }
      code.expected{
        word-break: break-all;
      }
      img.sample{
        max-height:80px;
        max-width:80px;
      }
      img.top{
      width:320px;
      }
    </style>
  </head>
  <body>
    <h1>多段階選抜 2014.8.2 問題</h1>
    <h2>問題</h2>
    <p>
      すべての正の整数を小さい順に並べた列がある。
      <br>
      この数列に対して「3の倍数番目を撤去」「平方数の次の値を撤去」などの操作を繰り返す。
      <br>
      出来上がった数列の最初の10件を出力せよ。
    </p>
    <h2>入力と詳細</h2>
    <p>
      入力は、下表の記号をならべたものである。
    </p>
    <table>
      <tr>
        <th>記号</th>
        <th>意味</th>
      </tr>
      <tr>
        <td>2〜9</td>
        <td>2〜9 の倍数番目を撤去(先頭が1番目であることに注意)</td>
      </tr>
      <tr>
        <td>S</td>
        <td>平方数の次を撤去</td>
      </tr>
      <tr>
        <td>s</td>
        <td>平方数の直前を撤去</td>
      </tr>
      <tr>
        <td>C</td>
        <td>立方数の直後を撤去</td>
      </tr>
      <tr>
        <td>c</td>
        <td>立方数の直前を撤去</td>
      </tr>
      <tr>
        <td>h</td>
        <td>先頭の100件を撤去</td>
      </tr>
    </table>
    <p>
      具体的には
      <br>
      <code>ss6cc24S</code>
      <br>
      こんな感じ。この入力を受けての処理は
    </p>
    <table>
      <tr>
        <td>
          <code>1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21</code>
        </td>
      </tr>
      <tr>
        <td>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;↓
          <code>s</code>
        </td>
      </tr>
      <tr>
        <td>
          <code>1,2,4,5,6,7,9,10,11,12,13,14,16,17,18,19,20,21,22,23</code>
        </td>
      </tr>
      <tr>
        <td>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;↓
          <code>s</code>
        </td>
      </tr>
      <tr>
        <td>
          <code>1,4,5,6,9,10,11,12,13,16,17,18,19,20,21,22,25,26,27</code>
        </td>
      </tr>
      <tr>
        <td>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;↓
          <code>6</code>
        </td>
      </tr>
      <tr>
        <td>
          <code>1,4,5,6,9,11,12,13,16,17,19,20,21,22,25,27,28,29,30</code>
        </td>
      </tr>
      <tr>
        <td>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;↓
          <code>c</code>
        </td>
      </tr>
      <tr>
        <td>
          <code>1,4,5,6,9,11,12,13,16,17,19,20,21,22,27,28,29,30,31</code>
        </td>
      </tr>
      <tr>
        <td>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;↓
          <code>c</code>
        </td>
      </tr>
      <tr>
        <td>
          <code>1,4,5,6,9,11,12,13,16,17,19,20,21,27,28,29,30,31,33</code>
        </td>
      </tr>
      <tr>
        <td>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;↓
          <code>2</code>
        </td>
      </tr>
      <tr>
        <td>
          <code>1,5,9,12,16,19,21,28,30,33,37,39,42,44,49,51,53,56,58</code>
        </td>
      </tr>
      <tr>
        <td>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;↓
          <code>4</code>
        </td>
      </tr>
      <tr>
        <td>
          <code>1,5,9,16,19,21,30,33,37,42,44,49,53,56,58,67,70,72,77</code>
        </td>
      </tr>
      <tr>
        <td>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;↓
          <code>S</code>
        </td>
      </tr>
      <tr>
        <td>
          <code>1,9,21,30,33,37,42,44,49,56,58,67,70,72,77,81,89,91</code>
        </td>
      </tr>
    </table>
    <p>
      こうなる。
    </p>
    <p>
      「平方数の直後を撤去」についてちょっと説明しておく。
      <br>
      上記の例の最後の処理で「
      1,5,9,16,19,21,30,33,37,42,...
      」から「平方数の直後を撤去」している。
      <br>
      元の数列に含まれる平方数は「
      1,9,16,49,81,...
      」。
      <br>
      撤去するべき値は平方数の次なので、
      <br>
      元の数列で
      1
      の次ににある
      5
      、
      9
      の次ににある
      16
      、
      16
      の次ににある
      19
      、
      などになる。
      <br>
      立方数の直前なども同様。
    </p>
    <h2>出力</h2>
    <p>
      出来上がった数列の先頭10件をコンマ区切りで出力する。
      <br>
      数列の要素は、10進数で。
      <br>
      つまり、
      <br>
      <code>ss6cc24S</code>
      <br>
      という入力に対しては、上にある表のとおりに処理が進む。最初の10件を出力すればよいので
      <br>
      <code>1,9,21,30,33,37,42,44,49,56</code>
      <br>
      を出力すればよい。
    </p>
    <h2>補足</h2>
    <ul>
      <li>
        数列の先頭は1番目であることに注意
      </li>
      <li>
        平方数は、整数を2乗したらできる数で、1, 4, 9, 16, 25, ... という具合。
      </li>
      <li>
        立方数は、整数を3乗したらできる数で、1, 8, 27, 64, 125, ... という具合。
      </li>
      <li>
        <code>s</code>, <code>S</code>, <code>c</code>, <code>C</code>
        は、数列の値、それ以外は数列の順序を見ている。
      </li>
      <li>
        不正な入力に対処する必要はない。
      </li>
      <li>
        実装ができた方は
        <a href='http://qiita.com/Nabetani/items/1c83005a854d2c6cbb69'>Qiitaの記事</a>
        のコメント欄からリンクを張っていただくと見つけやすくて助かります。
      </li>
      <li>
        この問題は2014年8月2日に開催される 第24回オフラインリアルタイムどう書く の問題です。イベントについては
        <a href='http://yhpg.doorkeeper.jp/events/13159'>
          Doorkeeper のページ
        </a>
        の方を御覧下さい。
      </li>
    </ul>
    <h2>サンプルデータ</h2>
    <table class='sample'>
      <tr>
        <th>#</th>
        <th>入力</th>
        <th>期待</th>
      </tr>
      <tr>
        <td>0</td>
        <td class='sample'>
          <code>ss6cc24S</code>
        </td>
        <td>
          <code class='expected'>1,9,21,30,33,37,42,44,49,56</code>
        </td>
      </tr>
      <tr>
        <td>1</td>
        <td class='sample'>
          <code>h</code>
        </td>
        <td>
          <code class='expected'>101,102,103,104,105,106,107,108,109,110</code>
        </td>
      </tr>
      <tr>
        <td>2</td>
        <td class='sample'>
          <code>hh</code>
        </td>
        <td>
          <code class='expected'>201,202,203,204,205,206,207,208,209,210</code>
        </td>
      </tr>
      <tr>
        <td>3</td>
        <td class='sample'>
          <code>hhh</code>
        </td>
        <td>
          <code class='expected'>301,302,303,304,305,306,307,308,309,310</code>
        </td>
      </tr>
      <tr>
        <td>4</td>
        <td class='sample'>
          <code>2</code>
        </td>
        <td>
          <code class='expected'>1,3,5,7,9,11,13,15,17,19</code>
        </td>
      </tr>
      <tr>
        <td>5</td>
        <td class='sample'>
          <code>22</code>
        </td>
        <td>
          <code class='expected'>1,5,9,13,17,21,25,29,33,37</code>
        </td>
      </tr>
      <tr>
        <td>6</td>
        <td class='sample'>
          <code>222</code>
        </td>
        <td>
          <code class='expected'>1,9,17,25,33,41,49,57,65,73</code>
        </td>
      </tr>
      <tr>
        <td>7</td>
        <td class='sample'>
          <code>3</code>
        </td>
        <td>
          <code class='expected'>1,2,4,5,7,8,10,11,13,14</code>
        </td>
      </tr>
      <tr>
        <td>8</td>
        <td class='sample'>
          <code>33</code>
        </td>
        <td>
          <code class='expected'>1,2,5,7,10,11,14,16,19,20</code>
        </td>
      </tr>
      <tr>
        <td>9</td>
        <td class='sample'>
          <code>333</code>
        </td>
        <td>
          <code class='expected'>1,2,7,10,14,16,20,23,28,29</code>
        </td>
      </tr>
      <tr>
        <td>10</td>
        <td class='sample'>
          <code>s</code>
        </td>
        <td>
          <code class='expected'>1,2,4,5,6,7,9,10,11,12</code>
        </td>
      </tr>
      <tr>
        <td>11</td>
        <td class='sample'>
          <code>ss</code>
        </td>
        <td>
          <code class='expected'>1,4,5,6,9,10,11,12,13,16</code>
        </td>
      </tr>
      <tr>
        <td>12</td>
        <td class='sample'>
          <code>sss</code>
        </td>
        <td>
          <code class='expected'>4,5,9,10,11,12,16,17,18,19</code>
        </td>
      </tr>
      <tr>
        <td>13</td>
        <td class='sample'>
          <code>S</code>
        </td>
        <td>
          <code class='expected'>1,3,4,6,7,8,9,11,12,13</code>
        </td>
      </tr>
      <tr>
        <td>14</td>
        <td class='sample'>
          <code>SS</code>
        </td>
        <td>
          <code class='expected'>1,4,7,8,9,12,13,14,15,16</code>
        </td>
      </tr>
      <tr>
        <td>15</td>
        <td class='sample'>
          <code>SSS</code>
        </td>
        <td>
          <code class='expected'>1,8,9,13,14,15,16,20,21,22</code>
        </td>
      </tr>
      <tr>
        <td>16</td>
        <td class='sample'>
          <code>c</code>
        </td>
        <td>
          <code class='expected'>1,2,3,4,5,6,8,9,10,11</code>
        </td>
      </tr>
      <tr>
        <td>17</td>
        <td class='sample'>
          <code>cc</code>
        </td>
        <td>
          <code class='expected'>1,2,3,4,5,8,9,10,11,12</code>
        </td>
      </tr>
      <tr>
        <td>18</td>
        <td class='sample'>
          <code>ccc</code>
        </td>
        <td>
          <code class='expected'>1,2,3,4,8,9,10,11,12,13</code>
        </td>
      </tr>
      <tr>
        <td>19</td>
        <td class='sample'>
          <code>C</code>
        </td>
        <td>
          <code class='expected'>1,3,4,5,6,7,8,10,11,12</code>
        </td>
      </tr>
      <tr>
        <td>20</td>
        <td class='sample'>
          <code>CC</code>
        </td>
        <td>
          <code class='expected'>1,4,5,6,7,8,11,12,13,14</code>
        </td>
      </tr>
      <tr>
        <td>21</td>
        <td class='sample'>
          <code>CCC</code>
        </td>
        <td>
          <code class='expected'>1,5,6,7,8,12,13,14,15,16</code>
        </td>
      </tr>
      <tr>
        <td>22</td>
        <td class='sample'>
          <code>23</code>
        </td>
        <td>
          <code class='expected'>1,3,7,9,13,15,19,21,25,27</code>
        </td>
      </tr>
      <tr>
        <td>23</td>
        <td class='sample'>
          <code>32</code>
        </td>
        <td>
          <code class='expected'>1,4,7,10,13,16,19,22,25,28</code>
        </td>
      </tr>
      <tr>
        <td>24</td>
        <td class='sample'>
          <code>2h</code>
        </td>
        <td>
          <code class='expected'>201,203,205,207,209,211,213,215,217,219</code>
        </td>
      </tr>
      <tr>
        <td>25</td>
        <td class='sample'>
          <code>h2</code>
        </td>
        <td>
          <code class='expected'>101,103,105,107,109,111,113,115,117,119</code>
        </td>
      </tr>
      <tr>
        <td>26</td>
        <td class='sample'>
          <code>sC</code>
        </td>
        <td>
          <code class='expected'>1,4,5,6,7,9,10,11,12,13</code>
        </td>
      </tr>
      <tr>
        <td>27</td>
        <td class='sample'>
          <code>Cs</code>
        </td>
        <td>
          <code class='expected'>1,4,5,6,7,8,10,11,12,13</code>
        </td>
      </tr>
      <tr>
        <td>28</td>
        <td class='sample'>
          <code>s468</code>
        </td>
        <td>
          <code class='expected'>1,2,4,6,7,11,12,16,17,20</code>
        </td>
      </tr>
      <tr>
        <td>29</td>
        <td class='sample'>
          <code>S468</code>
        </td>
        <td>
          <code class='expected'>1,3,4,7,8,12,13,16,18,21</code>
        </td>
      </tr>
      <tr>
        <td>30</td>
        <td class='sample'>
          <code>cc579</code>
        </td>
        <td>
          <code class='expected'>1,2,3,4,8,9,11,13,15,16</code>
        </td>
      </tr>
      <tr>
        <td>31</td>
        <td class='sample'>
          <code>CC579</code>
        </td>
        <td>
          <code class='expected'>1,4,5,6,8,11,13,15,17,18</code>
        </td>
      </tr>
      <tr>
        <td>32</td>
        <td class='sample'>
          <code>85</code>
        </td>
        <td>
          <code class='expected'>1,2,3,4,6,7,9,10,12,13</code>
        </td>
      </tr>
      <tr>
        <td>33</td>
        <td class='sample'>
          <code>sh</code>
        </td>
        <td>
          <code class='expected'>110,111,112,113,114,115,116,117,118,119</code>
        </td>
      </tr>
      <tr>
        <td>34</td>
        <td class='sample'>
          <code>94h</code>
        </td>
        <td>
          <code class='expected'>150,151,154,155,156,158,159,160,163,164</code>
        </td>
      </tr>
      <tr>
        <td>35</td>
        <td class='sample'>
          <code>h9c8</code>
        </td>
        <td>
          <code class='expected'>101,102,103,104,105,106,107,110,111,112</code>
        </td>
      </tr>
      <tr>
        <td>36</td>
        <td class='sample'>
          <code>Cc3s</code>
        </td>
        <td>
          <code class='expected'>1,3,5,6,10,11,13,16,17,19</code>
        </td>
      </tr>
      <tr>
        <td>37</td>
        <td class='sample'>
          <code>cs4h6</code>
        </td>
        <td>
          <code class='expected'>149,150,152,153,154,157,158,160,161,162</code>
        </td>
      </tr>
      <tr>
        <td>38</td>
        <td class='sample'>
          <code>84523c</code>
        </td>
        <td>
          <code class='expected'>1,3,11,15,23,26,34,38,46,49</code>
        </td>
      </tr>
      <tr>
        <td>39</td>
        <td class='sample'>
          <code>54C78hS</code>
        </td>
        <td>
          <code class='expected'>228,231,232,233,236,241,242,243,246,247</code>
        </td>
      </tr>
      <tr>
        <td>40</td>
        <td class='sample'>
          <code>65h7ccs</code>
        </td>
        <td>
          <code class='expected'>151,152,153,154,157,158,160,163,164,165</code>
        </td>
      </tr>
      <tr>
        <td>41</td>
        <td class='sample'>
          <code>c95hSc2C</code>
        </td>
        <td>
          <code class='expected'>145,147,151,153,156,159,162,164,168,171</code>
        </td>
      </tr>
      <tr>
        <td>42</td>
        <td class='sample'>
          <code>c5h3Ss794</code>
        </td>
        <td>
          <code class='expected'>130,131,133,137,138,142,148,150,152,157</code>
        </td>
      </tr>
      <tr>
        <td>43</td>
        <td class='sample'>
          <code>7ShscC846</code>
        </td>
        <td>
          <code class='expected'>129,130,131,134,135,139,141,142,146,148</code>
        </td>
      </tr>
      <tr>
        <td>44</td>
        <td class='sample'>
          <code>cshSCCS7ch</code>
        </td>
        <td>
          <code class='expected'>253,254,256,259,260,261,263,264,265,266</code>
        </td>
      </tr>
      <tr>
        <td>45</td>
        <td class='sample'>
          <code>hhC7849Ss6C</code>
        </td>
        <td>
          <code class='expected'>201,202,203,205,206,211,212,216,220,225</code>
        </td>
      </tr>
      <tr>
        <td>46</td>
        <td class='sample'>
          <code>hhsc3C987Ccs</code>
        </td>
        <td>
          <code class='expected'>201,202,204,205,207,208,214,217,218,220</code>
        </td>
      </tr>
      <tr>
        <td>47</td>
        <td class='sample'>
          <code>SC7S8hc59ss2</code>
        </td>
        <td>
          <code class='expected'>162,169,174,178,182,185,188,194,199,203</code>
        </td>
      </tr>
      <tr>
        <td>48</td>
        <td class='sample'>
          <code>s7S6c35C9CShc</code>
        </td>
        <td>
          <code class='expected'>367,371,377,379,380,385,387,388,392,395</code>
        </td>
      </tr>
      <tr>
        <td>49</td>
        <td class='sample'>
          <code>4scC3hh982Cc5s</code>
        </td>
        <td>
          <code class='expected'>422,426,430,434,447,451,459,463,471,479</code>
        </td>
      </tr>
      <tr>
        <td>50</td>
        <td class='sample'>
          <code>23h465Ssc9CchC</code>
        </td>
        <td>
          <code class='expected'>1027,1033,1045,1047,1057,1069,1071,1075,1081,1093</code>
        </td>
      </tr>
    </table>
    <h2>C/C++/Java 用のテストデータ</h2>
    <textarea>/*0*/ test( "ss6cc24S", "1,9,21,30,33,37,42,44,49,56" );    
/*1*/ test( "h", "101,102,103,104,105,106,107,108,109,110" );    
/*2*/ test( "hh", "201,202,203,204,205,206,207,208,209,210" );    
/*3*/ test( "hhh", "301,302,303,304,305,306,307,308,309,310" );    
/*4*/ test( "2", "1,3,5,7,9,11,13,15,17,19" );    
/*5*/ test( "22", "1,5,9,13,17,21,25,29,33,37" );    
/*6*/ test( "222", "1,9,17,25,33,41,49,57,65,73" );    
/*7*/ test( "3", "1,2,4,5,7,8,10,11,13,14" );    
/*8*/ test( "33", "1,2,5,7,10,11,14,16,19,20" );    
/*9*/ test( "333", "1,2,7,10,14,16,20,23,28,29" );    
/*10*/ test( "s", "1,2,4,5,6,7,9,10,11,12" );    
/*11*/ test( "ss", "1,4,5,6,9,10,11,12,13,16" );    
/*12*/ test( "sss", "4,5,9,10,11,12,16,17,18,19" );    
/*13*/ test( "S", "1,3,4,6,7,8,9,11,12,13" );    
/*14*/ test( "SS", "1,4,7,8,9,12,13,14,15,16" );    
/*15*/ test( "SSS", "1,8,9,13,14,15,16,20,21,22" );    
/*16*/ test( "c", "1,2,3,4,5,6,8,9,10,11" );    
/*17*/ test( "cc", "1,2,3,4,5,8,9,10,11,12" );    
/*18*/ test( "ccc", "1,2,3,4,8,9,10,11,12,13" );    
/*19*/ test( "C", "1,3,4,5,6,7,8,10,11,12" );    
/*20*/ test( "CC", "1,4,5,6,7,8,11,12,13,14" );    
/*21*/ test( "CCC", "1,5,6,7,8,12,13,14,15,16" );    
/*22*/ test( "23", "1,3,7,9,13,15,19,21,25,27" );    
/*23*/ test( "32", "1,4,7,10,13,16,19,22,25,28" );    
/*24*/ test( "2h", "201,203,205,207,209,211,213,215,217,219" );    
/*25*/ test( "h2", "101,103,105,107,109,111,113,115,117,119" );    
/*26*/ test( "sC", "1,4,5,6,7,9,10,11,12,13" );    
/*27*/ test( "Cs", "1,4,5,6,7,8,10,11,12,13" );    
/*28*/ test( "s468", "1,2,4,6,7,11,12,16,17,20" );    
/*29*/ test( "S468", "1,3,4,7,8,12,13,16,18,21" );    
/*30*/ test( "cc579", "1,2,3,4,8,9,11,13,15,16" );    
/*31*/ test( "CC579", "1,4,5,6,8,11,13,15,17,18" );    
/*32*/ test( "85", "1,2,3,4,6,7,9,10,12,13" );    
/*33*/ test( "sh", "110,111,112,113,114,115,116,117,118,119" );    
/*34*/ test( "94h", "150,151,154,155,156,158,159,160,163,164" );    
/*35*/ test( "h9c8", "101,102,103,104,105,106,107,110,111,112" );    
/*36*/ test( "Cc3s", "1,3,5,6,10,11,13,16,17,19" );    
/*37*/ test( "cs4h6", "149,150,152,153,154,157,158,160,161,162" );    
/*38*/ test( "84523c", "1,3,11,15,23,26,34,38,46,49" );    
/*39*/ test( "54C78hS", "228,231,232,233,236,241,242,243,246,247" );    
/*40*/ test( "65h7ccs", "151,152,153,154,157,158,160,163,164,165" );    
/*41*/ test( "c95hSc2C", "145,147,151,153,156,159,162,164,168,171" );    
/*42*/ test( "c5h3Ss794", "130,131,133,137,138,142,148,150,152,157" );    
/*43*/ test( "7ShscC846", "129,130,131,134,135,139,141,142,146,148" );    
/*44*/ test( "cshSCCS7ch", "253,254,256,259,260,261,263,264,265,266" );    
/*45*/ test( "hhC7849Ss6C", "201,202,203,205,206,211,212,216,220,225" );    
/*46*/ test( "hhsc3C987Ccs", "201,202,204,205,207,208,214,217,218,220" );    
/*47*/ test( "SC7S8hc59ss2", "162,169,174,178,182,185,188,194,199,203" );    
/*48*/ test( "s7S6c35C9CShc", "367,371,377,379,380,385,387,388,392,395" );    
/*49*/ test( "4scC3hh982Cc5s", "422,426,430,434,447,451,459,463,471,479" );    
/*50*/ test( "23h465Ssc9CchC", "1027,1033,1045,1047,1057,1069,1071,1075,1081,1093" );</textarea>
  </body>
</html>
